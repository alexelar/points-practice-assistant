<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <title>Ассистент по работе с точками</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>
    <div class="container">
        <span class="mic-indicator" id="micIndicator"></span>
        <button id="settingsBtn" class="btn-icon">⋮</button>

        <div class="status" id="status" data-i18n="readyStatus">Начите сессию</div>
        
        <div class="controls">
            <button id="startBtn" class="btn btn-primary" data-i18n="startBtn">Начать</button>
            <button id="stopBtn" class="btn btn-alert" disabled data-i18n="stopBtn">Завершить</button>
        </div>
        
        <div class="progress">
            <div><span data-i18n="cycleLabel">Цикл</span>: <span id="cycleCount">0</span></div>
            <div><span data-i18n="durationLabel">Время</span>: <span id="duration">0:00</span></div>
        </div>
        
        <div class="version" id="version"></div>
    </div>

    <div id="tapOverlay" class="tap-overlay">
        <div class="tap-hint" data-i18n="tapToContinue">Нажмите для продолжения</div>
    </div>

    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <button id="closeSettingsIcon" class="btn-icon modal-close">⨯</button>
            <h2 data-i18n="settings">Настройки</h2>
            <label for="language"><span data-i18n="language">Язык</span>:
                <select id="language">
                    <option value="en">English</option>
                    <option value="ru">Русский</option>
                </select>
            </label>
            <label for="inputMode"><span data-i18n="inputMode">Режим ввода</span>:
                <select id="inputMode">
                    <option value="voice" data-i18n="voiceMode">Голос</option>
                    <option value="tap" data-i18n="tapMode">Касание</option>
                </select>
            </label>
            <label for="sessionMode"><span data-i18n="sessionMode">Режим сессии</span>:
                <select id="sessionMode">
                    <option value="short" data-i18n="shortSessionMode">Пропускать команды: прикоснись, отпусти</option>
                    <option value="full" data-i18n="full">Полный</option>
                </select>
            </label>
            <label for="playbackRate"><span data-i18n="playbackSpeed">Скорость воспроизведения</span>:
                <input type="number" id="playbackRate" min="0.5" max="2" step="0.1" value="1.2">
            </label>
            <label for="repeatTimeout"><span data-i18n="repeatTimeout">Интервал повтора команды (сек)</span>:
                <input type="number" id="repeatTimeout" min="1" max="60" value="10">
            </label>
            <label for="inspectBodyInterval"><span data-i18n="inspectBodyInterval">Интервал команды Осмотри тело (циклы)</span>:
                <input type="number" id="inspectBodyInterval" min="1" max="100" value="10">
            </label>
            <label for="shuffleInterval"><span data-i18n="shuffleInterval">Интервал перемешивания команд Почувствуй (циклы)</span>:
                <input type="number" id="shuffleInterval" min="1" max="100" value="3">
            </label>
            <br>
            <label for="postVadDelayMs"><span data-i18n="postVadDelayMs">Пауза после обнаружения голоса (мс)</span>:
                <input type="number" id="postVadDelayMs" min="0" max="3000" step="100" value="0">
            </label>
            <label for="positiveSpeechThreshold"><span data-i18n="positiveSpeechThreshold">Порог наличия речи</span>:
                <input type="number" id="positiveSpeechThreshold" min="0.1" max="1" step="0.05" value="0.6">
            </label>
            <label for="negativeSpeechThreshold"><span data-i18n="negativeSpeechThreshold">Порог отсутсвия речи</span>:
                <input type="number" id="negativeSpeechThreshold" min="0.05" max="1" step="0.05" value="0.5">
            </label>
            <label for="minSpeechMs"><span data-i18n="minSpeechMs">Мин. длительность речи (мс)</span>:
                <input type="number" id="minSpeechMs" min="50" max="3000" step="50" value="200">
            </label>
            <label for="redemptionMs"><span data-i18n="redemptionMs">Макс. пауза в речи (мс)</span>:
                <input type="number" id="redemptionMs" min="50" max="3000" step="50" value="300">
            </label>
            <br>
            <label for="feedbackType"><span data-i18n="feedbackType">Обратная связь при обнаружении голоса</span>:
                <select id="feedbackType">
                    <option value="none" data-i18n="feedbackNone">Нет</option>
                    <option value="vibration" data-i18n="feedbackVibration">Вибрация</option>
                    <option value="sound" data-i18n="feedbackSound">Звук</option>
                </select>
            </label>
            <label for="feedbackFrequency"><span data-i18n="feedbackFrequency">Частота звука (Гц)</span>:
                <input type="number" id="feedbackFrequency" min="200" max="2000" step="100" value="800">
            </label>
            <label for="feedbackVolume"><span data-i18n="feedbackVolume">Громкость звука</span>:
                <input type="number" id="feedbackVolume" min="0.05" max="1" step="0.05" value="0.15">
            </label>
            <label for="feedbackDuration"><span data-i18n="feedbackDuration">Длительность звука (сек)</span>:
                <input type="number" id="feedbackDuration" min="0.05" max="1" step="0.05" value="0.15">
            </label>
            <button id="closeSettings" class="btn btn-primary btn-left" data-i18n="close">Закрыть</button>
        </div>
    </div>
    
    <script type="module" src="src/main.js"></script>
</body>
</html>
